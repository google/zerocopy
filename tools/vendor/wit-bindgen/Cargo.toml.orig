[package]
name = "wit-bindgen"
authors = ["Alex Crichton <alex@alexcrichton.com>"]
version = { workspace = true }
edition = { workspace = true }
repository = { workspace = true }
license = { workspace = true }
rust-version = { workspace = true }
homepage = 'https://github.com/bytecodealliance/wit-bindgen'
description = """
Rust bindings generator and runtime support for WIT and the component model.
Used when compiling Rust programs to the component model.
"""

[lints]
workspace = true

[package.metadata.docs.rs]
all-features = true

[dependencies]
wit-bindgen-rust-macro = { path = "./macro", optional = true, version = "0.51.0" }
bitflags = { workspace = true, optional = true }
futures = { version = "0.3.30", optional = true }

# When built as part of libstd
core = { version = "1.0", optional = true, package = "rustc-std-workspace-core" }
alloc = { version = "1.0", optional = true, package = "rustc-std-workspace-alloc" }

[features]
default = ["macros", "realloc", "async", "std", "bitflags"]
macros = ["dep:wit-bindgen-rust-macro"]
realloc = []
std = []
async = ["std", "wit-bindgen-rust-macro?/async"]
bitflags = ["dep:bitflags"]
async-spawn = ['async', 'dep:futures']

# Unstable feature to support being a libstd dependency
rustc-dep-of-std = ["dep:core", "dep:alloc"]

# Requires a newer `wasm-component-ld` and `wasm-tools`, so currently disabled
# by default. Once the versions of tooling have propagated this will be enabled
# by default.
inter-task-wakeup = ["async"]
