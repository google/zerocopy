description = """
Purpose: Special sanity-check test for the integration sandbox.
Behavior: Uses the `run_idempotency_test` handler to guarantee the test runner catches and rejects un-cleared modifications inside sandboxed test directories. Essential for guaranteeing test consistency.
"""

[test]
[[test.phases]]
name = "first_run"
expected_status = "success"
args = ["verify", "--allow-sorry"]

[[test.phases]]
name = "second_run"
expected_status = "failure"
args = ["verify", "--allow-sorry"]
expected_stderr_regex = "Target .lake directory already exists"
