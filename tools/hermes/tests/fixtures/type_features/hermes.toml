description = """
Purpose: Exercises extraction of advanced Rust typing invariants.
Behavior: Evaluates structural logic involving `const N: usize` generics, associated trait types (`AssocType.Item`), and implicitly uninhabited `nomatch` variants. Tracks accurate translation into Lean typeclasses/instances.
"""

[workspace]
test_name = "type_features"

[extraction]
start_from = ["crate"]

[output]
style = "lean"

[[test.artifact]]
package = "type_features"
target = "type_features"
kind = "lean"
should_exist = true
content_contains = [
    "instance {N} : Hermes.IsValid (ConstGen N)",  # Const Generic implicit binder
    "instance {N} : Hermes.IsSafe (ConstTrait N)", # Const Generic Trait implicit binder
    "match self with | .A _ => True | .B _ => False", # Enum matching
    "isSafe : AssocType.Item Self = U32", # Associated Type usage
    "nomatch self", # Uninhabited Type
]

[test]
args = ["verify", "--allow-sorry"]
