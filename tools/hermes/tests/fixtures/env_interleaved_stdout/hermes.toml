description = """
Purpose: Validates robustness of Charon CLI message interception.
Behavior: Intercepts parsed JSON messages interleaved with raw unstructured text `Line 1 from charon`. Assures the Hermes diagnostic monitor properly processes JSON segments without choking on unstructured noise.
"""

[dependencies]

[test]
args = ["verify", "--allow-sorry"]
expected_status = "known_bug"
expected_stderr = "  \u00d7 interleaved error\n   \u256d\u2500[[PROJECT_ROOT]/src/lib.rs:1:1]\n 1 \u2502 pub fn foo() {}\n   \u00b7 \u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\n   \u00b7      \u2570\u2500\u2500 label\n 2 \u2502 \n   \u2570\u2500\u2500\u2500\u2500\n\nError: Diagnostic error in charon\n"

[test.mock]
charon = "mock_charon.sh"
